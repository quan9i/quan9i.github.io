{"title":"Flask 从0到0.1 part-01","uid":"d70f7939ae7e6d64d51d92d64d7620bd","slug":"Flask从0到0.1 part-01","date":"2023-03-13T13:20:20.000Z","updated":"2023-04-20T16:32:06.000Z","comments":true,"path":"api/articles/Flask从0到0.1 part-01.json","keywords":null,"cover":"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303140018924.jpeg","content":"<h1 id=\"Flask\"><a href=\"#Flask\" class=\"headerlink\" title=\"Flask\"></a>Flask</h1><h2 id=\"环境搭建\"><a href=\"#环境搭建\" class=\"headerlink\" title=\"环境搭建\"></a>环境搭建</h2><p> Pycharm+Flask，具体流程如下，打开Pycharm</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303131942289.png\"></p>\n<p>记得选下面这个<code>Previously configured interpreter</code>选项，上面那个是新建环境，而这个是自己C盘的环境，上面那个容易出现报错。</p>\n<p>然后接下来可以发现有两个文件夹+一个文件，<code>app.py</code>是主入口文件，<code>static</code>是静态文件夹，<code>templates</code>是模板文件夹</p>\n<p>其<code>app.py</code>内代码具体作用如下（而后点击右上角的小绿三角进行运行）</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132009231.png\" alt=\"image-20230313200950043\"></p>\n<p>可以发现下方的URL，访问即可</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132011641.png\" alt=\"image-20230313201139610\"></p>\n<h2 id=\"部分配置\"><a href=\"#部分配置\" class=\"headerlink\" title=\"部分配置\"></a>部分配置</h2><h3 id=\"debug配置\"><a href=\"#debug配置\" class=\"headerlink\" title=\"debug配置\"></a>debug配置</h3><p>说一下为什么要配置这个</p>\n<p>当我们运行一个程序</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132014179.png\" alt=\"image-20230313201454985\"></p>\n<p>此时已经运行起来了，比如我们想更换返回内容为<code>Welcome quan9i&#39;s blog </code>，但我们修改过后打开浏览器会发现是没有变化的，这是因为没有开启<code>debug</code>模式，这个时候我们如果想在浏览器上看到效果，我们还需要重新关闭再开启，这个相对是比较麻烦的，而当我们开启debug模式后，我们则可以直接修改，而后在浏览器查看变化。</p>\n<p>如何开启<code>debug</code>模式呢，关闭程序运行，而后点击右上角</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132017620.png\" alt=\"image-20230313201751579\"></p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132018913.png\" alt=\"image-20230313201810792\"></p>\n<p>此时勾选完<code>FLASK_DEBUG</code>点击<code>Apply</code>，如何点击<code>ok</code>即可，此时再来运行</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132018576.png\" alt=\"image-20230313201846503\"></p>\n<p>将内容修改为<code>Welcome quan9i</code>，此时打开浏览器查看</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132019007.png\" alt=\"image-20230313201931847\"></p>\n<h3 id=\"host配置\"><a href=\"#host配置\" class=\"headerlink\" title=\"host配置\"></a>host配置</h3><p>修改这个的作用是为了使其他电脑能访问到自身电脑的FLask项目。</p>\n<p>如何配置呢，与刚刚类似，右上角打开编辑</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132023803.png\" alt=\"image-20230313202329675\"></p>\n<p>在这里添加一个<code>--host=0.0.0.0</code>即可</p>\n<h3 id=\"配置端口\"><a href=\"#配置端口\" class=\"headerlink\" title=\"配置端口\"></a>配置端口</h3><p>默认为5000端口，当5000端口被占用，想进行更换时，可以和刚刚host相似，在同一处加上<code>--port =8088</code>，即可配置为8088端口</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132026121.png\" alt=\"image-20230313202614996\"></p>\n<p>此时再运行文件</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132026133.png\" alt=\"image-20230313202630094\"></p>\n<p>端口从5000变成了8088端口</p>\n<h2 id=\"URL与视图\"><a href=\"#URL与视图\" class=\"headerlink\" title=\"URL与视图\"></a>URL与视图</h2><p>我们可以自行定义新的路由，比如像这样</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/quan9i'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">quan9i</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"我是quan9i\"</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/blog'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">blog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"Welcome my blog\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>接下来运行访问查看效果</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132034785.png\" alt=\"image-20230313203416691\"></p>\n<p>那么我们如何写入有参数的路由呢，这里举个例子，示例如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/blog/&lt;blog_id>'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#&lt;blog_id>可以改为&lt;int:blog_id>或&lt;string:blog_id>，这个的话其实就是一个数据强制转换</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">blog_detail</span><span class=\"token punctuation\">(</span>blog_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"您访问的是博客的第%s篇文章\"</span> <span class=\"token operator\">%</span> blog_id<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>接下来尝试去进行访问</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132037765.png\" alt=\"image-20230313203728728\">但这个相对来说不是很灵活，还有一种方式，是采用<code>request.args</code>的方法来写一个有参数的路由，具体示例如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/book/list'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">book_list</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\">#request.args: 类字典类型</span>\n    page <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"page\"</span><span class=\"token punctuation\">,</span>default<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">type</span><span class=\"token operator\">=</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#default是默认值，不填参数则默认值为1</span>\n    <span class=\"token keyword\">return</span> f\"您获取的是第<span class=\"token punctuation\">&#123;</span>page<span class=\"token punctuation\">&#125;</span>页的图书列表\n    <span class=\"token comment\">#f是将当前环境中的变量直接放入花括号中进行使用</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>这个的话需要我们去导入<code>request</code> 模块，然后我们去访问</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132050953.png\" alt=\"image-20230313205046915\"></p>\n<p>接下来传值</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132052537.png\" alt=\"image-20230313205246492\"></p>\n<h2 id=\"Jinja2\"><a href=\"#Jinja2\" class=\"headerlink\" title=\"Jinja2\"></a>Jinja2</h2><h3 id=\"模板渲染\"><a href=\"#模板渲染\" class=\"headerlink\" title=\"模板渲染\"></a>模板渲染</h3><p>点击<code>template</code>中的<code>html</code></p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132101604.png\" alt=\"image-20230313210145539\"></p>\n<p>接下来命名为<code>index.html</code>，随便编写一下内容</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132102900.png\" alt=\"image-20230313210245842\"></p>\n<p>那我们这里该如何进行使用呢，这里需要调用一个模块，即<code>render_template</code>模块，然后简单修改代码即可，具体如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#使用Flask类创建一个app对象</span>\n<span class=\"token comment\">#__name__:代表当前app.py这个模块</span>\n<span class=\"token comment\">#作用1：以后出现bug，他可以帮助我们快速定位</span>\n<span class=\"token comment\">#作用2：对于寻找模板文件，有一个绝对路径</span>\n\n<span class=\"token comment\">#创建一个路由和视图函数的映射</span>\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#定义跟路由</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># put application's code here</span>\n    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>此时运行程序，访问网页<img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132104231.png\" alt=\"image-20230313210434180\"></p>\n<p>那么如何对有参数的文件进行一个模板渲染呢，与此类似，这里简单说一下，首先在<code>template</code>文件夹下新建<code>html文件</code>，然后我们这里假设变量是<code>blog_id</code>，<code>Jinjia2</code>模板引用变量的方式是<code>&#123;&#123;变量名&#125;&#125;</code>，所以我们这里这样写即可</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132109008.png\" alt=\"image-20230313210913971\"></p>\n<p>而后我们的主文件<code>app.py</code>这样写</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#使用Flask类创建一个app对象</span>\n<span class=\"token comment\">#__name__:代表当前app.py这个模块</span>\n<span class=\"token comment\">#作用1：以后出现bug，他可以帮助我们快速定位</span>\n<span class=\"token comment\">#作用2：对于寻找模板文件，有一个绝对路径</span>\n\n<span class=\"token comment\">#创建一个路由和视图函数的映射</span>\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#定义跟路由</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># put application's code here</span>\n    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/blog/&lt;blog_id>'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">blog_detail</span><span class=\"token punctuation\">(</span>blog_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"blog_detail.html\"</span><span class=\"token punctuation\">,</span>blog_id<span class=\"token operator\">=</span>blog_id<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>此时去访问界面并附加参数</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132110780.png\" alt=\"image-20230313211001736\"></p>\n<h3 id=\"模板访问对象属性\"><a href=\"#模板访问对象属性\" class=\"headerlink\" title=\"模板访问对象属性\"></a>模板访问对象属性</h3><p>模板该如何访问对象的属性呢，我们这里以一个例子来进行相关讲解。</p>\n<p>主入口文件<code>app.py</code>具体代码如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>username<span class=\"token punctuation\">,</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> username\n        self<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">\"quan9i\"</span><span class=\"token punctuation\">,</span>email<span class=\"token operator\">=</span><span class=\"token string\">\"qwq@qq.com\"</span><span class=\"token punctuation\">)</span>\n    person <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"username\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"赵四\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"email\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"zhaosi@qq.com\"</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span>  render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">,</span>user<span class=\"token operator\">=</span>user<span class=\"token punctuation\">,</span>person<span class=\"token operator\">=</span>person<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>可以看到这里是定义了一个<code>User</code>对象，其中含有<code>username</code>和<code>email</code>属性，同时呢，我们这里也采用字典的方式，写入一个<code>person</code>参数，其中也包含这两个属性，接下来如何访问呢，在<code>Jinjia2</code>模板中，字典可以通过<code>字典名[属性]</code>来访问，也可以这样访问<code>字典名.属性</code>，我们的<code>index.html</code>文件内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>quan9i's blog<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>欢迎来到博客首页<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>&#123;&#123; user.username &#125;&#125;/&#123;&#123; user.email &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>&#123;&#123; person['username'] &#125;&#125;/&#123;&#123; person.email &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>接下来执行程序，访问界面，可以看到这两个是都可以的。</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132120007.png\" alt=\"image-20230313212016967\"></p>\n<h3 id=\"过滤器使用\"><a href=\"#过滤器使用\" class=\"headerlink\" title=\"过滤器使用\"></a>过滤器使用</h3><p>常见的过滤器如下</p>\n<pre class=\"line-numbers language-php\" data-language=\"php\"><code class=\"language-php\"><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：返回一个数值的绝对值。示例：<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">|</span><span class=\"token class-name\">abs</span>\n\n<span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span>default_value<span class=\"token punctuation\">,</span>boolean<span class=\"token operator\">=</span><span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span>：如果当前变量没有值，则会使用参数中的值来代替。示例：<span class=\"token class-name\">name</span><span class=\"token operator\">|</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">(</span>‘xiaotuo’<span class=\"token punctuation\">)</span>——如果name不存在，则会使用xiaotuo来替代。boolean<span class=\"token operator\">=</span><span class=\"token constant boolean\">False</span>默认是在只有这个变量为undefined的时候才会使用<span class=\"token keyword\">default</span>中的值，如果想使用python的形式判断是否为<span class=\"token constant boolean\">false</span>，则可以传递boolean<span class=\"token operator\">=</span><span class=\"token constant boolean\">true</span>。也可以使用<span class=\"token keyword\">or</span>来替换。\n\n<span class=\"token function\">escape</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>或e：转义字符，会将<span class=\"token operator\">&lt;</span>、<span class=\"token operator\">></span>等符号转义成<span class=\"token constant\">HTML</span>中的符号。显例：<span class=\"token class-name\">content</span><span class=\"token operator\">|</span><span class=\"token class-name\">escape</span>或<span class=\"token class-name\">content</span><span class=\"token operator\">|</span><span class=\"token class-name\">e</span>。\n\n<span class=\"token function\">first</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：返回一个序列的第一个元素。示例：<span class=\"token class-name\">names</span><span class=\"token operator\">|</span><span class=\"token class-name\">first</span>\n\n<span class=\"token function\">format</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span>arags<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>kwargs<span class=\"token punctuation\">)</span>：格式化字符串。比如：<span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#123;</span> <span class=\"token string double-quoted-string\">\"%s\"</span> <span class=\"token operator\">-</span> <span class=\"token string double-quoted-string\">\"%s\"</span><span class=\"token operator\">|</span><span class=\"token class-name\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Hello?'</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"Foo!\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">&#125;</span>将输出：Helloo<span class=\"token operator\">?</span> <span class=\"token operator\">-</span> Foo<span class=\"token operator\">!</span>\n\n<span class=\"token function\">last</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：返回一个序列的最后一个元素。示例：<span class=\"token class-name\">names</span><span class=\"token operator\">|</span><span class=\"token class-name\">last</span>。\n\n<span class=\"token function\">length</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：返回一个序列或者字典的长度。示例：<span class=\"token class-name\">names</span><span class=\"token operator\">|</span><span class=\"token class-name\">length</span>。\n\n<span class=\"token function\">join</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span>d<span class=\"token operator\">=</span>u”<span class=\"token punctuation\">)</span>：将一个序列用d这个参数的值拼接成字符串。\n\n<span class=\"token function\">safe</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：如果开启了全局转义，那么safe过滤器会将变量关掉转义。示例：<span class=\"token class-name\">content_html</span><span class=\"token operator\">|</span><span class=\"token class-name\">safe</span>。\n\n<span class=\"token keyword type-declaration\">int</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：将值转换为<span class=\"token keyword type-declaration\">int</span>类型。\n\n<span class=\"token keyword type-declaration\">float</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：将值转换为<span class=\"token keyword type-declaration\">float</span>类型。\n\n<span class=\"token function\">lower</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：将字符串转换为小写。\n\n<span class=\"token function\">upper</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：将字符串转换为小写。\n\n<span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span>old<span class=\"token punctuation\">,</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">)</span>： 替换将old替换为<span class=\"token keyword\">new</span>的字符串。\n\n<span class=\"token function\">truncate</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span>length<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span>killwords<span class=\"token operator\">=</span><span class=\"token constant boolean\">False</span><span class=\"token punctuation\">)</span>：截取length长度的字符串。\n\n<span class=\"token function\">striptags</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：删除字符串中所有的<span class=\"token constant\">HTML</span>标签，如果出现多个空格，将替换成一个空格。\n\ntrim：截取字符串前面和后面的空白字符。\n\n<span class=\"token keyword type-declaration\">string</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span>：将变量转换成字符串。\n\n<span class=\"token function\">wordcount</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>：计算一个长字符串中单词的个数。\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>那么如何进行使用呢，具体如下所示，向这些内置的，即Python自带的，我们直接使用管道符<code>|</code>加上<code>过滤器名</code>即可使用，我们这里的<code>index.html</code>代码如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>quan9i's blog<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>欢迎来到博客首页<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>&#123;&#123; user.username &#125;&#125;————&#123;&#123; user.username|length &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>接下来访问界面</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132133797.png\" alt=\"image-20230313213332753\"></p>\n<p>可以看到返回了6，对应的是<code>quan9i</code>的长度，接下来说一下如何自定义过滤器。其实自定义一个函数，如何再简单设置一下即可，具体<code>app.py</code>代码如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">datetime_format</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">,</span><span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token string\">\"%Y年-%m月-%d日 %H:%H\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> value<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span>add_template_filter<span class=\"token punctuation\">(</span>datetime_format<span class=\"token punctuation\">,</span><span class=\"token string\">\"dformat\"</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#增添一个自定义函数作为过滤器，并命名为dformat</span>\n\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>username<span class=\"token punctuation\">,</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> username\n        self<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">\"quan9i\"</span><span class=\"token punctuation\">,</span>email<span class=\"token operator\">=</span><span class=\"token string\">\"qwq@qq.com\"</span><span class=\"token punctuation\">)</span>\n    mytime <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span>  render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">,</span>user<span class=\"token operator\">=</span>user<span class=\"token punctuation\">,</span>mytime<span class=\"token operator\">=</span>mytime<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>此时再设置一下<code>index.html</code>,具体内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>quan9i's blog<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>欢迎来到博客首页<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>&#123;&#123; user.username &#125;&#125;————&#123;&#123; user.username|length &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>&#123;&#123; mytime|dformat &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>此时访问界面</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132141813.png\" alt=\"image-20230313214134765\"></p>\n<p>可以发现自定义过滤器已生效，格式就是我们刚刚设置的那种，年月日的形式。</p>\n<h3 id=\"控制语句\"><a href=\"#控制语句\" class=\"headerlink\" title=\"控制语句\"></a>控制语句</h3><p>控制语句，常见的是<code>if</code>和<code>for</code>，而在<code>Jinja2</code>中，写语句的话需要注意格式是<code>&#123;% xx %&#125;</code>，同时需要写上<code>end</code>进行闭合，比如if`语句就是</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token punctuation\">&#123;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">if</span> xxx <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">&#123;</span><span class=\"token operator\">%</span> endif <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>对<code>for</code>语句就是</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token punctuation\">&#123;</span><span class=\"token operator\">%</span> <span class=\"token keyword\">for</span> xxx <span class=\"token keyword\">in</span> xxx <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">&#123;</span><span class=\"token operator\">%</span> endfor <span class=\"token operator\">%</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>接下来举个例子，我们这里的入口文件<code>app.py</code>内容如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>username<span class=\"token punctuation\">,</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>username <span class=\"token operator\">=</span> username\n        self<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    age <span class=\"token operator\">=</span> <span class=\"token number\">17</span>\n    books <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"三国演义\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"罗贯中\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"水浒传\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"施耐庵\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span>  render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"control.html\"</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">=</span>age<span class=\"token punctuation\">,</span>books<span class=\"token operator\">=</span>books<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>我们的<code>control.html</code>内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>控制语句demo<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n&#123;%  if age>18 %&#125;\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>您已经满18岁，可以进入网吧<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n&#123;% elif age==18 %&#125;\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>您刚满18岁，需要父母陪同进入网吧<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n&#123;% else %&#125;\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>您未满18岁，不能进入网吧<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n&#123;% endif %&#125;\n\n&#123;% for book in books %&#125;\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>图书名称:&#123;&#123; book.name &#125;&#125;,图书作者:&#123;&#123; book.author &#125;&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n&#123;% endfor %&#125;\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>此时访问界面</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132203744.png\" alt=\"image-20230313220303695\"></p>\n<h3 id=\"模板继承\"><a href=\"#模板继承\" class=\"headerlink\" title=\"模板继承\"></a>模板继承</h3><p>一些模块，比如导航栏和底部信息是常用的，如果每次都去写，是比较麻烦的。</p>\n<p>对于这个的实现，我们这里以代码为例，主入口文件<code>app.py</code>内容如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    age <span class=\"token operator\">=</span> <span class=\"token number\">17</span>\n    books <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"三国演义\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"罗贯中\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"水浒传\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"施耐庵\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span>  render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"control.html\"</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">=</span>age<span class=\"token punctuation\">,</span>books<span class=\"token operator\">=</span>books<span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/child'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"child.html\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>我们的父模板<code>base.html</code>内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>父模板<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>我是父模板的文字<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>我们的子模板<code>child.html</code>内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;% extends \"base.html\"%><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>而后可以看到我们主入口文件中是用的<code>child.html</code>，接下来去访问界面</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132210188.png\" alt=\"image-20230313221046146\"></p>\n<p>此时发现是复刻了父模板，但实际情况不可能要求一模一样，我们如何进行更改呢，这里仍然以代码为例</p>\n<p>主文件入口<code>app.py</code>内容如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    age <span class=\"token operator\">=</span> <span class=\"token number\">17</span>\n    books <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"三国演义\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"罗贯中\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"水浒传\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"施耐庵\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span>  render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"control.html\"</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">=</span>age<span class=\"token punctuation\">,</span>books<span class=\"token operator\">=</span>books<span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/child'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">child</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"child.html\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/child2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">child2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"child2.html\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>父模板<code>base.html</code>内容为</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>&#123;% block title %&#125;&#123;% endblock %&#125;<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>首页<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>新闻<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n&#123;% block name %&#125;\n&#123;% endblock %&#125;\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span>这是底部的标签<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>子模板1<code>child.html</code>内容为</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&#123;% extends \"base.html\" %&#125;\n\n&#123;% block title %&#125;\n我是子模板的标题\n&#123;% endblock %&#125;\n\n&#123;% block name %&#125;\n我是子模板的name\n&#123;% endblock %&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>子模板2<code>child2.html</code>内容为</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&#123;% extends \"base.html\" %&#125;\n\n&#123;% block title %&#125;\n我是child2\n&#123;% endblock %&#125;\n\n&#123;% block name %&#125;\n我是child2\n&#123;% endblock %&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>此时分别访问<code>child</code>和<code>child2</code><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132221771.png\" alt=\"image-20230313222149712\"></p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132222746.png\" alt=\"image-20230313222201702\"></p>\n<p>可以发现两个只有中间不同，头部和底部都是相同的</p>\n<h3 id=\"加载静态文件\"><a href=\"#加载静态文件\" class=\"headerlink\" title=\"加载静态文件\"></a>加载静态文件</h3><p>除了放html文件，我们还需要放一些图片，js，css文件</p>\n<p>接下来首先说一下加载图片，主文件<code>app.py</code>内容如下</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask<span class=\"token punctuation\">,</span>render_template <span class=\"token comment\">#从Flask包中调用flask</span>\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    age <span class=\"token operator\">=</span> <span class=\"token number\">17</span>\n    books <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"三国演义\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"罗贯中\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"水浒传\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"author\"</span><span class=\"token punctuation\">:</span><span class=\"token string\">\"施耐庵\"</span>\n    <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span>  render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"control.html\"</span><span class=\"token punctuation\">,</span>age<span class=\"token operator\">=</span>age<span class=\"token punctuation\">,</span>books<span class=\"token operator\">=</span>books<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/static'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">static_home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> render_template<span class=\"token punctuation\">(</span><span class=\"token string\">\"static.html\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果当前文件为主入口，就会往下运行</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n<p><code>static.html</code>内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Title<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;&#123;url_for(<span class=\"token punctuation\">'</span>static<span class=\"token punctuation\">'</span>,filename=<span class=\"token punctuation\">'</span>1.jpg<span class=\"token punctuation\">'</span>)&#125;&#125;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>同时我这里<code>static</code>文件夹下是有<code>1.jpg</code>的</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132231219.png\" alt=\"image-20230313223138995\"></p>\n<p>接下来访问界面</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132232630.png\" alt=\"image-20230313223206987\"></p>\n<p>可以发现成功加载。</p>\n<p>接下来加载css，我们在<code>static</code>文件夹下新建文件夹，命名为<code>css</code>，在其下创建新文件并命名为<code>style.css</code>，其内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">body&#123;\n    background-color: pink;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132235493.png\" alt=\"image-20230313223559363\"></p>\n<p>而后在<code>static.html</code>中添加这一句话来进行<code>css加载</code></p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span>   <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;&#123; url_for(<span class=\"token punctuation\">'</span>static<span class=\"token punctuation\">'</span>,filename=<span class=\"token punctuation\">'</span>css/style.css<span class=\"token punctuation\">'</span>)&#125;&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132236673.png\" alt=\"image-20230313223645610\"></p>\n<p>此时去访问界面</p>\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132237814.png\" alt=\"image-20230313223705162\"></p>\n<p>接下来去加载<code>js</code>，同理，在<code>static</code>文件夹下创建新文件夹命名为<code>js</code>，在其内创建新文件命名为<code>myjs.js</code>，写入内容如下</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">alert(\"我是myjs.js中弹出的\");<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>接下来在<code>static.html</code>中添加一句话</p>\n<pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span>  <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>&#123;&#123; url_for(<span class=\"token punctuation\">'</span>static<span class=\"token punctuation\">'</span>,filename=<span class=\"token punctuation\">'</span>js/myjs.js<span class=\"token punctuation\">'</span>) &#125;&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132242272.png\" alt=\"image-20230313224245134\"></p>\n<p>然后去访问界面<img src=\"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303132241268.png\" alt=\"image-20230313224108697\"></p>\n","feature":true,"text":"Flask环境搭建 Pycharm+Flask，具体流程如下，打开Pycharm 记得选下面这个Previously configured interpreter选项，上面那个是新建环境，而这个是自己C盘的环境，上面那个容易出现报错。 然后接下来可以发现有两个文件夹+一个文件，a...","link":"","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"WEB知识","slug":"WEB知识","count":23,"path":"api/categories/WEB知识.json"}],"tags":[{"name":"FLask","slug":"FLask","count":3,"path":"api/tags/FLask.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Flask\"><span class=\"toc-text\">Flask</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA\"><span class=\"toc-text\">环境搭建</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%83%A8%E5%88%86%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">部分配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#debug%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">debug配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#host%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">host配置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E7%AB%AF%E5%8F%A3\"><span class=\"toc-text\">配置端口</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#URL%E4%B8%8E%E8%A7%86%E5%9B%BE\"><span class=\"toc-text\">URL与视图</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Jinja2\"><span class=\"toc-text\">Jinja2</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E6%9D%BF%E6%B8%B2%E6%9F%93\"><span class=\"toc-text\">模板渲染</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E6%9D%BF%E8%AE%BF%E9%97%AE%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7\"><span class=\"toc-text\">模板访问对象属性</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">过滤器使用</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">控制语句</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E6%9D%BF%E7%BB%A7%E6%89%BF\"><span class=\"toc-text\">模板继承</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">加载静态文件</span></a></li></ol></li></ol></li></ol>","author":{"name":"quan9i","slug":"blog-author","avatar":"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303140010598.jpeg","link":"/","description":"国家一级保护废物","socials":{"github":"https://github.com/quan9i","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/Reme_mber","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Flask 从0到0.1 part-02","uid":"2856bf724d46606b60ef8e9389133460","slug":"Flask从0到0.1 part-02","date":"2023-03-16T19:11:20.000Z","updated":"2023-03-16T19:12:10.000Z","comments":true,"path":"api/articles/Flask从0到0.1 part-02.json","keywords":null,"cover":"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303170312685.png","text":"Flask连接mysql数据库这个前提的话我们需要两个模块，即pymysql和sqlalchemy，前者用于连接mysql，后者是他提供了一种名为ORM的技术，使得我们不用通过Mysql的原生指令来执行命令，而是通过Python操作普通对象似的执行mysql语句。 主入口文件ap...","link":"","photos":[],"count_time":{"symbolsCount":"39k","symbolsTime":"36 mins."},"categories":[{"name":"WEB知识","slug":"WEB知识","count":23,"path":"api/categories/WEB知识.json"}],"tags":[{"name":"FLask","slug":"FLask","count":3,"path":"api/tags/FLask.json"}],"author":{"name":"quan9i","slug":"blog-author","avatar":"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303140010598.jpeg","link":"/","description":"国家一级保护废物","socials":{"github":"https://github.com/quan9i","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/Reme_mber","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"内网靶场实战——ATT&CK实战系列（一）","uid":"1435f592b7abfcf9251a6298346c1f3d","slug":"内网靶场实战——ATT&CK实战系列（一）","date":"2023-02-27T18:04:20.000Z","updated":"2024-02-14T07:48:44.000Z","comments":true,"path":"api/articles/内网靶场实战——ATT&CK实战系列（一）.json","keywords":null,"cover":"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303141543894.png","text":"环境搭建靶场地址http://vulnstack.qiyuanxuetang.net/vuln/detail/2/下载过文件后，需配置如下两个虚拟网络（一个内网，一个外网）靶场拓扑图如下这里我们的win7是作为Web服务器的，所以我们需要给Web服务器配置两张网卡，如下所示另外两...","link":"","photos":[],"count_time":{"symbolsCount":"4.3k","symbolsTime":"4 mins."},"categories":[{"name":"内网","slug":"内网","count":12,"path":"api/categories/内网.json"}],"tags":[{"name":"内网","slug":"内网","count":13,"path":"api/tags/内网.json"}],"author":{"name":"quan9i","slug":"blog-author","avatar":"https://quan9i.oss-cn-beijing.aliyuncs.com/img/202303140010598.jpeg","link":"/","description":"国家一级保护废物","socials":{"github":"https://github.com/quan9i","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/Reme_mber","juejin":"","customs":{}}},"feature":true}}